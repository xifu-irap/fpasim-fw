# fpasim-fw
Focal Plan Assembly simulator firmware

## definition
  The **@project_root_path** value represent the root path of this project. So, the user can clone this project where he wants. 


## Project Tree Structure

The following tree directories summarize each part of the project tree structure.

* (dir.) **git**: Git repository (don't touch).
* (dir.) **constraints**: Vivado synthesis tool constraints.
	* (dir.) **constrs_1**: vivado constraints set.
		* (file) **xem7350.xdc**: FPGA I/O pin constraints.
		* (file) **IO.xdc**: clock constraints and I/O timing constraints.
		* (file) **placement.xdc**: placement constraints (FPGA area selection by functions).
		* (file) **fmc_pinout_pandas.py (optional)**: generate a temporary FPGA I/O pin constraints (used only to help to build the IO.xdc file).
		* (file) **fmc_pinout_col_x.csv (optional)**: by fmc column, those files (used by the fmc_pinout_pandas.py) describes the relationship between the FMC (loc,name,...) and the FPGA (port name, pin location).
* (dir.) **ip**: IP source files linked to the FPGA technology or a board vendor
	* (dir.) **opal_kelly**: IP sources files from Opal Kelly.
	* (dir.) **xilinx**: IP sources files from Xilinx.
		* (dir.) **coregen**: IP sources files generated by GUI configuration.
		* (dir.) **xpm**: wrapper source files on the Xilinx XPM macro.
* (dir.) **lib**: vhdl and python simulation libraries for simulation.
	* (dir.) **common**: common python and vhdl libraries for the VHDL simulation (helping functions).
	* (dir.) **csv**: vhdl library for the VHDL simulation. This library manages the reading/writing of the csv files.
	* (dir.) **opal_kelly**: vhdl library for the VHDL simulation. This library manages the reading/writing on the **Opal Kelly USB** link.
* (dir.) **project**: Vivado project file (specific to a Vivado version).
* (dir.) **run**: python script used to configure a new project compilation and to launch a VHDL simulation.
	* (file) **conf_sim.py**: Defines vhdl unitary tests and copy Opal Kelly IP sources files into the ip/opal_kelly directory (essential for the project compilation).
	* (file) **launch_sim.py**: Launch a VHDL simulation.
* (dir.) **simu**: files for the VHDL simulation (vhdl testbench files, test variant files, waveform files, ...
* (dir.) **src/hdl**: VHDL source files.
	* (dir.) **clocking**: manage the design clocks (except the USB clock)
	* (dir.) **fpasim**: sources files of the FPASim function.
	* (dir.) **io**: manage the FPGA IO interface.
	* (dir.) **reset**: manage the design reset.
	* (dir.) **sim**: source file for the co-simulation with the DRE-DEMUX.
	* (dir.) **spi**: manage the spi bridge.
	* (dir.) **utils**: common source files used everywhere in the design.
* (dir.) **sw/script**: javascript files for the FPGA board test.
	* (dir.) **fpasim**: base functions used in the javascript test files.
	* (file) **fpasim_test_check_tmtc_link.dscript**: test the configuration of the FPGA boards (register access, RAM configuration, ...).
	* (file) **fpasim_test_make_pulse_generation.dscript**: test the generation of pulses on the FPGA boards.







